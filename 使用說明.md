# 工作事項記錄系統使用說明

## 系統啟動

### 方法一：整合模式（推薦）
Flask 已整合前端打包檔案，只需啟動後端即可使用完整應用：
```bash
cd backend
python -m venv venv
windows => venv\Scripts\activate.bat
linux => source venv/bin/activate
pip install -r requirements.txt
python app.py
```
訪問 http://localhost:5000 使用應用

#### 更新前端檔案步驟
如需更新前端程式碼後重新整合：
1. 進入前端目錄，執行打包指令：`cd frontend && npm run build`
2. 將 `frontend/dist` 資料夾內的所有檔案複製到 `backend/static` 資料夾
3. 重新啟動後端服務即可生效

### 方法二：自動啟動
雙擊 `start.bat` 檔案，系統會自動：
1. 安裝後端 Python 依賴
2. 啟動後端服務 (http://localhost:5000)
3. 安裝前端 Node.js 依賴
4. 啟動前端服務 (http://localhost:8080)

### 方法三：手動啟動

#### 後端啟動
```bash
cd backend
python -m venv venv
windows => venv\Scripts\activate.bat
linux => source venv/bin/activate
pip install -r requirements.txt
python app.py
```

#### 前端啟動
```bash
cd frontend
npm install
npm run serve
```

## 系統功能

### 任務管理
- 新增任務（包含案號、類別、表單名稱等欄位）
- 編輯任務內容
- 刪除任務
- 狀態管理（待處理/進行中/已完成）
- 優先級設定（低/中/高）

### 案件類別維護
- 新增類別
- 編輯類別名稱
- 啟用/停用類別
- 刪除類別（需先停用）

## 資料欄位說明

### 任務資料
- **案號**: 手動輸入的案件編號
- **案件類別**: 從維護清單選擇
- **表單名稱**: 相關表單文件名稱
- **任務標題**: 任務簡述
- **描述**: 詳細說明
- **聲請人**: 提出任務的人員
- **截止日期**: 完成期限
- **狀態**: 目前處理狀態
- **優先級**: 重要程度

### 時間戳記
- 所有資料都會自動記錄建立時間和最後修改時間
- 時間由程式端控制，不依賴資料庫預設值

## 權限控制

系統已加入JWT權限控制機制：

### 登入資訊
- 預設帳號：vicky
- 預設密碼：0217
- 帳密設定在 `backend/.env` 文件中

### 權限控制範圍
- **查詢功能**：無需登入，直接使用
- **異動功能**：需要登入權限，包括：
  - 新增、修改、刪除任務
  - 新增、修改、刪除類別
  - 新增、修改、刪除工作紀錄

### 使用方式
1. 首次使用異動功能時，系統會自動彈出登入對話框
2. 輸入正確帳密後，系統會記住登入狀態
3. Token 永不過期，除非手動清除瀏覽器儲存

### 環境變數設定 (.env)
```
# 登入帳密設定
ADMIN_ACCOUNT=vicky
ADMIN_PASSWORD=0217

# JWT 設定
JWT_SECRET_KEY=work-tracker-super-secret-key-2024
JWT_ALGORITHM=HS256
JWT_EXPIRE_HOURS=24
```

## 注意事項
- 確保 Python 3.7+ 和 Node.js 16+ 已安裝
- 後端預設使用 SQLite 資料庫，檔案位於 backend/work_tracker.db
- 首次啟動會自動建立預設類別
- 需要安裝 PyJWT 套件：`pip install PyJWT==2.8.0`